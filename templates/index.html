<!doctype html>
<html lang="en">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width,initial-scale=1" />
    <title>Sports Betting Odds — Database View</title>
    <style>
      body{font-family:Inter, system-ui, -apple-system, 'Segoe UI', Roboto, 'Helvetica Neue', Arial; padding:20px}
      table{border-collapse:collapse; width:100%}
      th,td{border:1px solid #ddd; padding:8px; text-align:left}
      th{background:#f3f3f3}
      pre{white-space:pre-wrap; word-wrap:break-word; margin:0}
      .count{margin-bottom:12px}
      input[type="search"]{padding:6px; width:300px; margin-bottom:12px}
    </style>
  </head>
  <body>
    <h1>Sports Betting Odds — Database View</h1>
    <div class="count">Total entries: {{ entries|length }}</div>

    <label for="q">Filter (section / entry_type / content): </label>
    <input id="q" type="search" placeholder="Type to filter" />

    <table id="tbl">
      <thead>
        <tr><th>#</th><th>Section</th><th>Type</th><th>Content</th></tr>
      </thead>
      <tbody>
        {% for e in entries %}
        <tr>
          <td>{{ e['id'] }}</td>
          <td>{{ e['section'] }}</td>
          <td>{{ e['entry_type'] }}</td>
          <td><pre>{{ e['content'] }}</pre></td>
        </tr>
        {% endfor %}
      </tbody>
    </table>

    <script>
      const q = document.getElementById('q');
      const rows = Array.from(document.querySelectorAll('#tbl tbody tr'));
      q.addEventListener('input', () => {
        const term = q.value.trim().toLowerCase();
        if (!term) {
          rows.forEach(r => r.style.display='');
          return;
        }
        rows.forEach(r => {
          const text = r.innerText.toLowerCase();
          r.style.display = text.includes(term) ? '' : 'none';
        });
      });
    </script>
  </body>
</html>
